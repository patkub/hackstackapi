"use strict";

$(function () {
  // render the navbar
  var navbar = new HackStackNavBar("home");
  navbar.inject("#navbar"); // render the navtabs

  var navtabs = new HackStackNavTabs("movies");
  navtabs.inject("#navtabs");
  $.getJSON(window.hackstack.API_SERVER + "movies", function (data) {
    // movies per row
    console.log(data);
    var NUM_CHUNKS = 3;

    var _loop = function _loop(i) {
      var temparray = data.slice(i, i + NUM_CHUNKS); // make array of chunks

      var movies = [];
      $.each(temparray, function (_, val) {
        var smallRentalItem = new HackStackRentalItemSmall("movie", val.itemID, val.title, val.year, val.description, val.imagePath, "/rentMovie/");
        movies.push(smallRentalItem.render());
      }); // make a card deck out of current movies
      // aligns empty spaces evenly

      var cardDeck = new HackStackCardDeck(movies, NUM_CHUNKS);
      document.getElementById("movies").appendChild(cardDeck.render());
    };

    for (var i = 0; i < data.length; i += NUM_CHUNKS) {
      _loop(i);
    }
  });
});
