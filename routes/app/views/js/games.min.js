"use strict";

$(function () {
  // render the navbar
  var navbar = new HackStackNavBar("home");
  navbar.inject("#navbar"); // render the navtabs

  var navtabs = new HackStackNavTabs("games");
  navtabs.inject("#navtabs");
  $.getJSON(window.hackstack.API_SERVER + "games", function (data) {
    // games per row
    var NUM_CHUNKS = 3;

    var _loop = function _loop(i) {
      var temparray = data.slice(i, i + NUM_CHUNKS); // make array of chunks

      var games = [];
      $.each(temparray, function (_, val) {
        var smallRentalItem = new HackStackRentalItemSmall("game", val.itemID, val.title, val.year, val.description, val.imagePath, "/rentGame/");
        games.push(smallRentalItem.render());
      }); // make a card deck out of current games
      // aligns empty spaces evenly

      var cardDeck = new HackStackCardDeck(games, NUM_CHUNKS);
      document.getElementById("games").appendChild(cardDeck.render());
    };

    for (var i = 0; i < data.length; i += NUM_CHUNKS) {
      _loop(i);
    }
  });
});
