"use strict";

$(function () {
  window.hackstack = window.hackstack || {};

  (function (hackstack) {
    // create the components
    var navbar = new HackStackNavBar("home");
    var navtabs = new HackStackNavTabs("games");
    var footer = new HackStackFooter(); // render the components

    $("#navbar").append(navbar.render());
    $("#navtabs").append(navtabs.render());
    $("#footer").append(footer.render());
    $.getJSON(hackstack.API_SERVER + "games", function (data) {
      // games per row
      var NUM_CHUNKS = 3;

      var _loop = function _loop(i) {
        var temparray = data.slice(i, i + NUM_CHUNKS); // make array of chunks

        var games = [];
        $.each(temparray, function (_, val) {
          var smallRentalItem = new HackStackRentalItemSmall("game", val.itemID, val.title, val.year, val.description, val.imagePath, "/rentGame/");
          games.push(smallRentalItem.render());
        }); // make a card deck out of current games
        // aligns empty spaces evenly

        var cardDeck = new HackStackCardDeck(games, NUM_CHUNKS);
        document.getElementById("games").append(cardDeck.render());
      };

      for (var i = 0; i < data.length; i += NUM_CHUNKS) {
        _loop(i);
      }
    });
  })(window.hackstack);
});
